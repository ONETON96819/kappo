// koffee 1.12.0

/*
00     00   0000000   000  000   000
000   000  000   000  000  0000  000
000000000  000000000  000  000 0 000
000 0 000  000   000  000  000  0000
000   000  000   000  000  000   000
 */
var BrowserWindow, Menu, Tray, _, about, activateApp, activeApp, activeWin, allKeys, app, appName, apps, args, childp, clipboard, createWindow, electron, findApps, fs, getActiveApp, iconDir, karg, klog, kstr, onWinResize, os, pkg, post, prefs, ref, reloadWindow, saveBounds, scripts, showAbout, slash, squareTimer, srcmap, toggleWindow, tray, valid, walkdir, win;

ref = require('kxk'), post = ref.post, srcmap = ref.srcmap, walkdir = ref.walkdir, about = ref.about, args = ref.args, childp = ref.childp, prefs = ref.prefs, karg = ref.karg, valid = ref.valid, slash = ref.slash, kstr = ref.kstr, klog = ref.klog, os = ref.os, fs = ref.fs, _ = ref._;

pkg = require('../package.json');

electron = require('electron');

app = electron.app;

BrowserWindow = electron.BrowserWindow;

Tray = electron.Tray;

Menu = electron.Menu;

clipboard = electron.clipboard;

iconDir = slash.resolve((app.getPath('userData')) + "/icons");

win = null;

tray = null;

apps = {};

scripts = {};

allKeys = [];

process.on('uncaughtException', function(err) {
    srcmap.logErr(err, 'ðŸ”»');
    return true;
});

klog.slog.icon = slash.fileUrl(slash.resolve(slash.join(__dirname, '..', 'img', 'menu@2x.png')));

app.setName(pkg.productName);

args = args.init("verbose     log verbose     false\ndebug       log debug       false  -D");

post.on('winlog', function(text) {
    return console.log(">>> " + text);
});

post.on('runScript', function(name) {
    return scripts[name].cb();
});

post.on('cancel', function() {
    return activateApp();
});

post.on('about', function() {
    return showAbout();
});

post.on('findApps', function() {
    return findApps();
});

post.onGet('apps', function() {
    return {
        apps: apps,
        scripts: scripts,
        allKeys: allKeys
    };
});

findApps = function() {
    var appFind, exeFind, sortKeys;
    sortKeys = function() {
        var hideWin;
        allKeys = Object.keys(apps).concat(Object.keys(scripts));
        allKeys.sort(function(a, b) {
            return a.toLowerCase().localeCompare(b.toLowerCase());
        });
        if (win) {
            return post.toWins('appsFound');
        } else {
            createWindow();
            hideWin = function() {
                return win != null ? win.hide() : void 0;
            };
            if (!args.debug) {
                return setTimeout(hideWin, 1000);
            }
        }
    };
    if (slash.win()) {
        exeFind = require('./exefind');
        return exeFind(function(exes) {
            if (valid(exes)) {
                apps = exes;
                return sortKeys();
            }
        });
    } else {
        appFind = require('./appfind');
        return appFind(function(appl) {
            apps = appl;
            return sortKeys();
        });
    }
};

appName = null;

activeApp = null;

activeWin = null;

getActiveApp = function() {
    var top, wxw;
    if (slash.win()) {
        wxw = require('wxw');
        top = wxw('info', 'top')[0];
        if ((top != null ? top.path : void 0) != null) {
            appName = activeApp = slash.base(top.path);
        }
    } else {
        activeApp = childp.execSync(__dirname + "/../bin/appswitch -P");
    }
    if (args.verbose) {
        console.log('getActiveApp', appName, activeApp, win != null);
    }
    if (win != null) {
        if (appName != null) {
            if (args.verbose) {
                console.log('getActiveApp currentApp', appName);
            }
            post.toWins('currentApp', appName);
        } else {
            if (args.verbose) {
                console.log('getActiveApp clearSearch', appName);
            }
            post.toWins('clearSearch');
        }
        if (args.verbose) {
            console.log('getActiveApp fade');
        }
        return post.toWins('fade');
    } else {
        return createWindow();
    }
};

activateApp = function() {
    var info, wxw;
    if (slash.win()) {
        if (activeWin) {
            wxw = require('wxw');
            info = wxw('info', activeWin)[0];
            if (info != null ? info.path : void 0) {
                klog('activate', info.path);
                wxw('launch', info.path);
            }
        }
        return win != null ? win.hide() : void 0;
    } else {
        if (activeApp == null) {
            return win != null ? win.hide() : void 0;
        } else {
            return childp.exec(__dirname + "/../bin/appswitch -fp " + activeApp, function(err) {
                return win != null ? win.hide() : void 0;
            });
        }
    }
};

toggleWindow = function() {
    var osascript;
    if (win != null ? win.isVisible() : void 0) {
        if (prefs.get('hideOnDoubleActivation', false)) {
            return win.hide();
        } else {
            post.toWins('openCurrent');
            if (!slash.win()) {
                return activateApp();
            }
        }
    } else {
        if (slash.win()) {
            if (win == null) {
                return createWindow();
            } else {
                getActiveApp();
                return win.focus();
            }
        } else {
            osascript = require('osascript')["eval"];
            return osascript("tell application \"System Events\"\n    set n to name of first application process whose frontmost is true\nend tell\ndo shell script \"echo \" & n", {
                type: 'AppleScript'
            }, function(err, name) {
                appName = String(name).trim();
                if (win == null) {
                    return createWindow();
                } else {
                    getActiveApp();
                    return win.focus();
                }
            });
        }
    }
};

reloadWindow = function() {
    return win.webContents.reloadIgnoringCache();
};

createWindow = function() {
    var bounds;
    if (win != null) {
        return;
    }
    win = new BrowserWindow({
        width: 300,
        height: 300,
        center: true,
        alwaysOnTop: true,
        movable: true,
        resizable: true,
        transparent: true,
        frame: false,
        maximizable: false,
        minimizable: false,
        minWidth: 200,
        minHeight: 200,
        maxWidth: 600,
        maxHeight: 600,
        fullscreen: false,
        show: false,
        webPreferences: {
            nodeIntegration: true
        }
    });
    bounds = prefs.get('bounds');
    if (bounds != null) {
        win.setBounds(bounds);
    }
    win.loadURL("file://" + __dirname + "/index.html");
    win.on('closed', function() {
        return win = null;
    });
    win.on('resize', onWinResize);
    win.on('move', saveBounds);
    win.on('ready-to-show', function() {
        getActiveApp();
        if (args.debug) {
            win.show();
            return win.webContents.openDevTools();
        }
    });
    return win;
};

saveBounds = function() {
    if (win != null) {
        return prefs.set('bounds', win.getBounds());
    }
};

squareTimer = null;

onWinResize = function(event) {
    var adjustSize;
    clearTimeout(squareTimer);
    adjustSize = function() {
        var b;
        b = win.getBounds();
        if (b.width !== b.height) {
            b.width = b.height = Math.min(b.width, b.height);
            win.setBounds(b);
        }
        return saveBounds();
    };
    return squareTimer = setTimeout(adjustSize, 300);
};

showAbout = function() {
    var color, highl, textc;
    if (prefs.get('scheme', 'bright') === 'bright') {
        color = '#fff';
        textc = '#ddd';
        highl = '#000';
    } else {
        textc = '#444';
        highl = '#fff';
        color = '#111';
    }
    return about({
        img: __dirname + "/../img/about.png",
        color: textc,
        highlight: highl,
        background: color,
        size: 200,
        pkg: pkg
    });
};

app.on('window-all-closed', function(event) {
    return event.preventDefault();
});

app.on('ready', function() {
    var ref1, scr;
    if (app.requestSingleInstanceLock != null) {
        if (app.requestSingleInstanceLock()) {
            app.on('second-instance', toggleWindow);
        } else {
            app.exit(0);
        }
    }
    tray = new Tray(__dirname + "/../img/menu.png");
    tray.on('click', toggleWindow);
    if (os.platform() !== 'darwin') {
        tray.setContextMenu(Menu.buildFromTemplate([
            {
                label: "Quit",
                click: function() {
                    app.exit(0);
                    return process.exit(0);
                }
            }, {
                label: "About",
                click: showAbout
            }, {
                label: "Activate",
                click: toggleWindow
            }
        ]));
    }
    if ((ref1 = app.dock) != null) {
        ref1.hide();
    }
    Menu.setApplicationMenu(Menu.buildFromTemplate([
        {
            label: app.getName(),
            submenu: [
                {
                    label: "About " + pkg.name,
                    accelerator: 'CmdOrCtrl+.',
                    click: function() {
                        return showAbout();
                    }
                }, {
                    type: 'separator'
                }, {
                    label: 'Quit',
                    accelerator: 'CmdOrCtrl+Q',
                    click: function() {
                        saveBounds();
                        app.exit(0);
                        return process.exit(0);
                    }
                }
            ]
        }, {
            label: 'Window',
            submenu: [
                {
                    label: 'Close Window',
                    accelerator: 'CmdOrCtrl+W',
                    click: function() {
                        return win != null ? win.close() : void 0;
                    }
                }, {
                    type: 'separator'
                }, {
                    label: 'Reload Window',
                    accelerator: 'CmdOrCtrl+Alt+L',
                    click: function() {
                        return reloadWindow();
                    }
                }, {
                    label: 'Toggle DevTools',
                    accelerator: 'CmdOrCtrl+Alt+I',
                    click: function() {
                        return win != null ? win.webContents.openDevTools() : void 0;
                    }
                }
            ]
        }
    ]));
    prefs.init({
        defaults: {
            shortcut: 'F1'
        }
    });
    electron.globalShortcut.register(prefs.get('shortcut'), toggleWindow);
    fs.ensureDirSync(iconDir);
    scr = require('./scripts');
    if (slash.win()) {
        scripts = scr.winScripts();
    } else {
        scripts = scr.macScripts();
    }
    return findApps();
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIuLi9jb2ZmZWUiLCJzb3VyY2VzIjpbIm1haW4uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFBQSxJQUFBOztBQVFBLE1BQW1HLE9BQUEsQ0FBUSxLQUFSLENBQW5HLEVBQUUsZUFBRixFQUFRLG1CQUFSLEVBQWdCLHFCQUFoQixFQUF5QixpQkFBekIsRUFBZ0MsZUFBaEMsRUFBc0MsbUJBQXRDLEVBQThDLGlCQUE5QyxFQUFxRCxlQUFyRCxFQUEyRCxpQkFBM0QsRUFBa0UsaUJBQWxFLEVBQXlFLGVBQXpFLEVBQStFLGVBQS9FLEVBQXFGLFdBQXJGLEVBQXlGLFdBQXpGLEVBQTZGOztBQUU3RixHQUFBLEdBQWdCLE9BQUEsQ0FBUSxpQkFBUjs7QUFDaEIsUUFBQSxHQUFnQixPQUFBLENBQVEsVUFBUjs7QUFFaEIsR0FBQSxHQUFnQixRQUFRLENBQUM7O0FBQ3pCLGFBQUEsR0FBZ0IsUUFBUSxDQUFDOztBQUN6QixJQUFBLEdBQWdCLFFBQVEsQ0FBQzs7QUFDekIsSUFBQSxHQUFnQixRQUFRLENBQUM7O0FBQ3pCLFNBQUEsR0FBZ0IsUUFBUSxDQUFDOztBQUN6QixPQUFBLEdBQWdCLEtBQUssQ0FBQyxPQUFOLENBQWdCLENBQUMsR0FBRyxDQUFDLE9BQUosQ0FBWSxVQUFaLENBQUQsQ0FBQSxHQUF5QixRQUF6Qzs7QUFFaEIsR0FBQSxHQUFnQjs7QUFDaEIsSUFBQSxHQUFnQjs7QUFFaEIsSUFBQSxHQUFnQjs7QUFDaEIsT0FBQSxHQUFnQjs7QUFDaEIsT0FBQSxHQUFnQjs7QUFFaEIsT0FBTyxDQUFDLEVBQVIsQ0FBVyxtQkFBWCxFQUErQixTQUFDLEdBQUQ7SUFDM0IsTUFBTSxDQUFDLE1BQVAsQ0FBYyxHQUFkLEVBQW1CLElBQW5CO1dBQ0E7QUFGMkIsQ0FBL0I7O0FBSUEsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFWLEdBQWlCLEtBQUssQ0FBQyxPQUFOLENBQWMsS0FBSyxDQUFD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QUFVLFVBQVYsQ0FBakMsRUFBd0QsWUFBeEQ7SUFFQSxFQUFFLENBQUMsYUFBSCxDQUFpQixPQUFqQjtJQUVBLEdBQUEsR0FBTSxPQUFBLENBQVEsV0FBUjtJQUNOLElBQUcsS0FBSyxDQUFDLEdBQU4sQ0FBQSxDQUFIO1FBQ0ksT0FBQSxHQUFVLEdBQUcsQ0FBQyxVQUFKLENBQUEsRUFEZDtLQUFBLE1BQUE7UUFHSSxPQUFBLEdBQVUsR0FBRyxDQUFDLFVBQUosQ0FBQSxFQUhkOztXQUtBLFFBQUEsQ0FBQTtBQXJGVyxDQUFmIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMCAgICAgMDAgICAwMDAwMDAwICAgMDAwICAwMDAgICAwMDBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMFxuMDAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMCAgMDAwIDAgMDAwXG4wMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgIDAwMDBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMFxuIyMjXG5cbnsgcG9zdCwgc3JjbWFwLCB3YWxrZGlyLCBhYm91dCwgYXJncywgY2hpbGRwLCBwcmVmcywga2FyZywgdmFsaWQsIHNsYXNoLCBrc3RyLCBrbG9nLCBvcywgZnMsIF8gfSA9IHJlcXVpcmUgJ2t4aydcblxucGtnICAgICAgICAgICA9IHJlcXVpcmUgJy4uL3BhY2thZ2UuanNvbidcbmVsZWN0cm9uICAgICAgPSByZXF1aXJlICdlbGVjdHJvbidcblxuYXBwICAgICAgICAgICA9IGVsZWN0cm9uLmFwcFxuQnJvd3NlcldpbmRvdyA9IGVsZWN0cm9uLkJyb3dzZXJXaW5kb3dcblRyYXkgICAgICAgICAgPSBlbGVjdHJvbi5UcmF5XG5NZW51ICAgICAgICAgID0gZWxlY3Ryb24uTWVudVxuY2xpcGJvYXJkICAgICA9IGVsZWN0cm9uLmNsaXBib2FyZFxuaWNvbkRpciAgICAgICA9IHNsYXNoLnJlc29sdmUgXCIje2FwcC5nZXRQYXRoKCd1c2VyRGF0YScpfS9pY29uc1wiXG5cbndpbiAgICAgICAgICAgPSBudWxsXG50cmF5ICAgICAgICAgID0gbnVsbFxuXG5hcHBzICAgICAgICAgID0ge31cbnNjcmlwdHMgICAgICAgPSB7fVxuYWxsS2V5cyAgICAgICA9IFtdXG5cbnByb2Nlc3Mub24gJ3VuY2F1Z2h0RXhjZXB0aW9uJyAoZXJyKSAtPlxuICAgIHNyY21hcC5sb2dFcnIgZXJyLCAn8J+UuydcbiAgICB0cnVlXG5cbmtsb2cuc2xvZy5pY29uID0gc2xhc2guZmlsZVVybCBzbGFzaC5yZXNvbHZlIHNsYXNoLmpvaW4gX19kaXJuYW1lLCAnLi4nICdpbWcnICdtZW51QDJ4LnBuZydcblxuYXBwLnNldE5hbWUgcGtnLnByb2R1Y3ROYW1lXG5cbmFyZ3MgPSBhcmdzLmluaXQgXCJcIlwiXG4gICAgdmVyYm9zZSAgICAgbG9nIHZlcmJvc2UgICAgIGZhbHNlXG4gICAgZGVidWcgICAgICAgbG9nIGRlYnVnICAgICAgIGZhbHNlICAtRFxuXCJcIlwiXG5cbiMgMDAwMDAwMDAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAwMDAwMDBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAgICAwMDAgICBcbiMgMDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgICAwMDAgICBcbiMgMDAwICAgICAgICAwMDAgICAwMDAgICAgICAgMDAwICAgICAwMDAgICBcbiMgMDAwICAgICAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgICAwMDAgICBcblxucG9zdC5vbiAnd2lubG9nJyAgICAodGV4dCkgLT4gbG9nIFwiPj4+IFwiICsgdGV4dFxucG9zdC5vbiAncnVuU2NyaXB0JyAobmFtZSkgLT4gc2NyaXB0c1tuYW1lXS5jYigpXG5wb3N0Lm9uICdjYW5jZWwnICAgLT4gYWN0aXZhdGVBcHAoKVxucG9zdC5vbiAnYWJvdXQnICAgIC0+IHNob3dBYm91dCgpXG5wb3N0Lm9uICdmaW5kQXBwcycgLT4gZmluZEFwcHMoKVxuXG5wb3N0Lm9uR2V0ICdhcHBzJyAtPiBhcHBzOiBhcHBzLCBzY3JpcHRzOnNjcmlwdHMsIGFsbEtleXM6YWxsS2V5c1xuXG4jIDAwMDAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgICAgICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMDAgICAgMDAwMDAwMCAgXG4jIDAwMCAgICAgICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgXG4jIDAwMDAwMCAgICAwMDAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAgICAgICAwMDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAgXG4jIDAwMCAgICAgICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgMDAwICAgICAgICAgICAgIDAwMCAgXG4jIDAwMCAgICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgMDAwICAgICAgICAwMDAwMDAwICAgXG5cbmZpbmRBcHBzID0gLT5cblxuICAgIHNvcnRLZXlzID0gLT5cblxuICAgICAgICBhbGxLZXlzID0gT2JqZWN0LmtleXMoYXBwcykuY29uY2F0IE9iamVjdC5rZXlzKHNjcmlwdHMpXG4gICAgICAgIGFsbEtleXMuc29ydCAoYSxiKSAtPiBhLnRvTG93ZXJDYXNlKCkubG9jYWxlQ29tcGFyZSBiLnRvTG93ZXJDYXNlKClcbiAgICAgICAgXG4gICAgICAgIGlmIHdpblxuICAgICAgICAgICAgcG9zdC50b1dpbnMgJ2FwcHNGb3VuZCdcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY3JlYXRlV2luZG93KClcbiAgICAgICAgICAgIGhpZGVXaW4gPSAtPiB3aW4/LmhpZGUoKVxuICAgICAgICAgICAgaWYgbm90IGFyZ3MuZGVidWdcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0IGhpZGVXaW4sIDEwMDBcbiAgICBcbiAgICBpZiBzbGFzaC53aW4oKVxuICAgICAgICBleGVGaW5kID0gcmVxdWlyZSAnLi9leGVmaW5kJ1xuICAgICAgICBleGVGaW5kIChleGVzKSAtPiBcbiAgICAgICAgICAgIGlmIHZhbGlkIGV4ZXNcbiAgICAgICAgICAgICAgICBhcHBzID0gZXhlc1xuICAgICAgICAgICAgICAgIHNvcnRLZXlzKClcbiAgICBlbHNlXG4gICAgICAgIGFwcEZpbmQgPSByZXF1aXJlICcuL2FwcGZpbmQnXG4gICAgICAgIGFwcEZpbmQgKGFwcGwpIC0+IFxuICAgICAgICAgICAgYXBwcyA9IGFwcGxcbiAgICAgICAgICAgIHNvcnRLZXlzKClcbiAgICAgICAgICAgIFxuIyAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwXG4jMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwXG4jMDAwMDAwMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgMDAwICAgMDAwMDAwMFxuIzAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgIDAwMFxuIzAwMCAgIDAwMCAgIDAwMDAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgMCAgICAgIDAwMDAwMDAwXG5cbmFwcE5hbWUgICA9IG51bGxcbmFjdGl2ZUFwcCA9IG51bGxcbmFjdGl2ZVdpbiA9IG51bGxcblxuZ2V0QWN0aXZlQXBwID0gLT5cblxuICAgIGlmIHNsYXNoLndpbigpXG4gICAgICAgIHd4dyA9IHJlcXVpcmUgJ3d4dydcbiAgICAgICAgdG9wID0gd3h3KCdpbmZvJyAndG9wJylbMF1cbiAgICAgICAgaWYgdG9wPy5wYXRoP1xuICAgICAgICAgICAgYXBwTmFtZSA9IGFjdGl2ZUFwcCA9IHNsYXNoLmJhc2UgdG9wLnBhdGhcbiAgICBlbHNlXG4gICAgICAgIGFjdGl2ZUFwcCA9IGNoaWxkcC5leGVjU3luYyBcIiN7X19kaXJuYW1lfS8uLi9iaW4vYXBwc3dpdGNoIC1QXCJcblxuICAgIGxvZyAnZ2V0QWN0aXZlQXBwJywgYXBwTmFtZSwgYWN0aXZlQXBwLCB3aW4/IGlmIGFyZ3MudmVyYm9zZVxuICAgICAgICBcbiAgICBpZiB3aW4/XG4gICAgICAgIGlmIGFwcE5hbWU/XG4gICAgICAgICAgICBsb2cgJ2dldEFjdGl2ZUFwcCBjdXJyZW50QXBwJyBhcHBOYW1lIGlmIGFyZ3MudmVyYm9zZVxuICAgICAgICAgICAgcG9zdC50b1dpbnMgJ2N1cnJlbnRBcHAnIGFwcE5hbWVcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbG9nICdnZXRBY3RpdmVBcHAgY2xlYXJTZWFyY2gnIGFwcE5hbWUgaWYgYXJncy52ZXJib3NlXG4gICAgICAgICAgICBwb3N0LnRvV2lucyAnY2xlYXJTZWFyY2gnXG4gICAgICAgIGxvZyAnZ2V0QWN0aXZlQXBwIGZhZGUnIGlmIGFyZ3MudmVyYm9zZVxuICAgICAgICBwb3N0LnRvV2lucyAnZmFkZSdcbiAgICBlbHNlXG4gICAgICAgIGNyZWF0ZVdpbmRvdygpXG5cbiMgIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMDAwMDAwICBcbiMgMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICBcbiMgMDAwMDAwMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgMDAwICAgMDAwMDAwMDAwICAgICAwMDAgICAgIDAwMDAwMDAgICBcbiMgMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICBcbiMgMDAwICAgMDAwICAgMDAwMDAwMCAgICAgMDAwICAgICAwMDAgICAgICAwICAgICAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMDAwMDAwICBcblxuYWN0aXZhdGVBcHAgPSAtPlxuXG4gICAgaWYgc2xhc2gud2luKClcbiAgICAgICAgaWYgYWN0aXZlV2luXG4gICAgICAgICAgICB3eHcgPSByZXF1aXJlICd3eHcnXG4gICAgICAgICAgICBpbmZvID0gd3h3KCdpbmZvJyBhY3RpdmVXaW4pWzBdXG4gICAgICAgICAgICBpZiBpbmZvPy5wYXRoXG4gICAgICAgICAgICAgICAga2xvZyAnYWN0aXZhdGUnIGluZm8ucGF0aFxuICAgICAgICAgICAgICAgIHd4dyAnbGF1bmNoJyBpbmZvLnBhdGhcbiAgICAgICAgICAgICAgICAjIHd4dyAncmFpc2UnIGluZm8ucGF0aFxuICAgICAgICAgICAgICAgICMgd3h3ICdmb2N1cycgaW5mby5wYXRoXG4gICAgICAgIHdpbj8uaGlkZSgpXG4gICAgZWxzZVxuXG4gICAgICAgIGlmIG5vdCBhY3RpdmVBcHA/XG4gICAgICAgICAgICB3aW4/LmhpZGUoKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjaGlsZHAuZXhlYyBcIiN7X19kaXJuYW1lfS8uLi9iaW4vYXBwc3dpdGNoIC1mcCAje2FjdGl2ZUFwcH1cIiwgKGVycikgLT4gd2luPy5oaWRlKClcblxuIzAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgIDAwMDAwMDAgICAwMDAgICAwMDBcbiMwMDAgMCAwMDAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwXG4jMDAwMDAwMDAwICAwMDAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwMFxuIzAwMCAgIDAwMCAgMDAwICAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDBcbiMwMCAgICAgMDAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAgICAgIDAwXG5cbnRvZ2dsZVdpbmRvdyA9IC0+XG4gICAgXG4gICAgaWYgd2luPy5pc1Zpc2libGUoKVxuICAgICAgICBpZiBwcmVmcy5nZXQgJ2hpZGVPbkRvdWJsZUFjdGl2YXRpb24nLCBmYWxzZVxuICAgICAgICAgICAgd2luLmhpZGUoKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBwb3N0LnRvV2lucyAnb3BlbkN1cnJlbnQnXG4gICAgICAgICAgICBhY3RpdmF0ZUFwcCgpIGlmIG5vdCBzbGFzaC53aW4oKVxuICAgIGVsc2VcbiAgICAgICAgaWYgc2xhc2gud2luKClcbiAgICAgICAgICAgIGlmIG5vdCB3aW4/XG4gICAgICAgICAgICAgICAgY3JlYXRlV2luZG93KClcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBnZXRBY3RpdmVBcHAoKVxuICAgICAgICAgICAgICAgIHdpbi5mb2N1cygpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIG9zYXNjcmlwdCA9IHJlcXVpcmUoJ29zYXNjcmlwdCcpLmV2YWxcbiAgICAgICAgICAgIG9zYXNjcmlwdCBcIlwiXCJcbiAgICAgICAgICAgICAgICB0ZWxsIGFwcGxpY2F0aW9uIFwiU3lzdGVtIEV2ZW50c1wiXG4gICAgICAgICAgICAgICAgICAgIHNldCBuIHRvIG5hbWUgb2YgZmlyc3QgYXBwbGljYXRpb24gcHJvY2VzcyB3aG9zZSBmcm9udG1vc3QgaXMgdHJ1ZVxuICAgICAgICAgICAgICAgIGVuZCB0ZWxsXG4gICAgICAgICAgICAgICAgZG8gc2hlbGwgc2NyaXB0IFwiZWNobyBcIiAmIG5cbiAgICAgICAgICAgICAgICBcIlwiXCIsIHR5cGU6J0FwcGxlU2NyaXB0JywgKGVycixuYW1lKSAtPlxuICAgICAgICAgICAgICAgICAgICBhcHBOYW1lID0gU3RyaW5nKG5hbWUpLnRyaW0oKVxuICAgICAgICAgICAgICAgICAgICBpZiBub3Qgd2luP1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlV2luZG93KClcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0QWN0aXZlQXBwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbi5mb2N1cygpXG5cbnJlbG9hZFdpbmRvdyA9IC0+IHdpbi53ZWJDb250ZW50cy5yZWxvYWRJZ25vcmluZ0NhY2hlKClcblxuIyAgMDAwMDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMDAwMDAwICBcbiMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgXG4jIDAwMCAgICAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwMDAgICAgIDAwMCAgICAgMDAwMDAwMCAgIFxuIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICBcbiMgIDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAwMDAwMCAgXG5cbmNyZWF0ZVdpbmRvdyA9IC0+XG5cbiAgICByZXR1cm4gaWYgd2luP1xuXG4gICAgd2luID0gbmV3IEJyb3dzZXJXaW5kb3dcbiAgICAgICAgd2lkdGg6ICAgICAgICAgICAzMDBcbiAgICAgICAgaGVpZ2h0OiAgICAgICAgICAzMDBcbiAgICAgICAgY2VudGVyOiAgICAgICAgICB0cnVlXG4gICAgICAgIGFsd2F5c09uVG9wOiAgICAgdHJ1ZVxuICAgICAgICBtb3ZhYmxlOiAgICAgICAgIHRydWVcbiAgICAgICAgcmVzaXphYmxlOiAgICAgICB0cnVlXG4gICAgICAgIHRyYW5zcGFyZW50OiAgICAgdHJ1ZVxuICAgICAgICBmcmFtZTogICAgICAgICAgIGZhbHNlXG4gICAgICAgIG1heGltaXphYmxlOiAgICAgZmFsc2VcbiAgICAgICAgbWluaW1pemFibGU6ICAgICBmYWxzZVxuICAgICAgICBtaW5XaWR0aDogICAgICAgIDIwMFxuICAgICAgICBtaW5IZWlnaHQ6ICAgICAgIDIwMFxuICAgICAgICBtYXhXaWR0aDogICAgICAgIDYwMFxuICAgICAgICBtYXhIZWlnaHQ6ICAgICAgIDYwMFxuICAgICAgICBmdWxsc2NyZWVuOiAgICAgIGZhbHNlXG4gICAgICAgIHNob3c6ICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgd2ViUHJlZmVyZW5jZXM6XG4gICAgICAgICAgICBub2RlSW50ZWdyYXRpb246IHRydWVcblxuICAgIGJvdW5kcyA9IHByZWZzLmdldCAnYm91bmRzJ1xuICAgIHdpbi5zZXRCb3VuZHMgYm91bmRzIGlmIGJvdW5kcz9cbiAgICB3aW4ubG9hZFVSTCBcImZpbGU6Ly8je19fZGlybmFtZX0vaW5kZXguaHRtbFwiXG4gICAgd2luLm9uICdjbG9zZWQnIC0+IHdpbiA9IG51bGxcbiAgICB3aW4ub24gJ3Jlc2l6ZScgb25XaW5SZXNpemVcbiAgICB3aW4ub24gJ21vdmUnICAgc2F2ZUJvdW5kc1xuICAgIHdpbi5vbiAncmVhZHktdG8tc2hvdycgLT5cbiAgICAgICAgZ2V0QWN0aXZlQXBwKClcbiAgICAgICAgaWYgYXJncy5kZWJ1Z1xuICAgICAgICAgICAgd2luLnNob3coKVxuICAgICAgICAgICAgd2luLndlYkNvbnRlbnRzLm9wZW5EZXZUb29scygpXG4gICAgd2luXG5cbnNhdmVCb3VuZHMgPSAtPiBpZiB3aW4/IHRoZW4gcHJlZnMuc2V0ICdib3VuZHMnLCB3aW4uZ2V0Qm91bmRzKClcblxuc3F1YXJlVGltZXIgPSBudWxsXG5cbm9uV2luUmVzaXplID0gKGV2ZW50KSAtPlxuICAgIFxuICAgIGNsZWFyVGltZW91dCBzcXVhcmVUaW1lclxuICAgIGFkanVzdFNpemUgPSAtPlxuICAgICAgICBiID0gd2luLmdldEJvdW5kcygpXG4gICAgICAgIGlmIGIud2lkdGggIT0gYi5oZWlnaHRcbiAgICAgICAgICAgIGIud2lkdGggPSBiLmhlaWdodCA9IE1hdGgubWluIGIud2lkdGgsIGIuaGVpZ2h0XG4gICAgICAgICAgICB3aW4uc2V0Qm91bmRzIGJcbiAgICAgICAgc2F2ZUJvdW5kcygpXG4gICAgc3F1YXJlVGltZXIgPSBzZXRUaW1lb3V0IGFkanVzdFNpemUsIDMwMFxuXG5zaG93QWJvdXQgPSAtPlxuICAgIFxuICAgIGlmIHByZWZzLmdldCgnc2NoZW1lJywgJ2JyaWdodCcpID09ICdicmlnaHQnXG4gICAgICAgIGNvbG9yID0gJyNmZmYnXG4gICAgICAgIHRleHRjID0gJyNkZGQnXG4gICAgICAgIGhpZ2hsID0gJyMwMDAnXG4gICAgZWxzZVxuICAgICAgICB0ZXh0YyA9ICcjNDQ0J1xuICAgICAgICBoaWdobCA9ICcjZmZmJ1xuICAgICAgICBjb2xvciA9ICcjMTExJ1xuICAgICAgICBcbiAgICBhYm91dFxuICAgICAgICBpbWc6ICAgICAgICBcIiN7X19kaXJuYW1lfS8uLi9pbWcvYWJvdXQucG5nXCJcbiAgICAgICAgY29sb3I6ICAgICAgdGV4dGNcbiAgICAgICAgaGlnaGxpZ2h0OiAgaGlnaGxcbiAgICAgICAgYmFja2dyb3VuZDogY29sb3JcbiAgICAgICAgc2l6ZTogICAgICAgMjAwXG4gICAgICAgIHBrZzogICAgICAgIHBrZ1xuXG5hcHAub24gJ3dpbmRvdy1hbGwtY2xvc2VkJyAoZXZlbnQpIC0+IGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuIzAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAgICAwMDBcbiMwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMCAwMDBcbiMwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgICAwMDAwMFxuIzAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDBcbiMwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgICAgMDAwXG5cbmFwcC5vbiAncmVhZHknIC0+XG5cbiAgICBpZiBhcHAucmVxdWVzdFNpbmdsZUluc3RhbmNlTG9jaz9cbiAgICAgICAgXG4gICAgICAgIGlmIGFwcC5yZXF1ZXN0U2luZ2xlSW5zdGFuY2VMb2NrKClcbiAgICAgICAgICAgIGFwcC5vbiAnc2Vjb25kLWluc3RhbmNlJyB0b2dnbGVXaW5kb3dcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgYXBwLmV4aXQgMFxuICAgIFxuICAgIHRyYXkgPSBuZXcgVHJheSBcIiN7X19kaXJuYW1lfS8uLi9pbWcvbWVudS5wbmdcIlxuICAgIHRyYXkub24gJ2NsaWNrJywgdG9nZ2xlV2luZG93XG4gICAgXG4gICAgaWYgb3MucGxhdGZvcm0oKSAhPSAnZGFyd2luJ1xuICAgICAgICB0cmF5LnNldENvbnRleHRNZW51IE1lbnUuYnVpbGRGcm9tVGVtcGxhdGUgW1xuICAgICAgICAgICAgbGFiZWw6IFwiUXVpdFwiXG4gICAgICAgICAgICBjbGljazogLT4gYXBwLmV4aXQgMDsgcHJvY2Vzcy5leGl0IDBcbiAgICAgICAgLFxuICAgICAgICAgICAgbGFiZWw6IFwiQWJvdXRcIlxuICAgICAgICAgICAgY2xpY2s6IHNob3dBYm91dFxuICAgICAgICAsXG4gICAgICAgICAgICBsYWJlbDogXCJBY3RpdmF0ZVwiXG4gICAgICAgICAgICBjbGljazogdG9nZ2xlV2luZG93XG4gICAgICAgIF1cbiAgICAgICAgXG4gICAgYXBwLmRvY2s/LmhpZGUoKVxuXG4gICAgIyAwMCAgICAgMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgMDAwMCAgMDAwICAwMDAgICAwMDBcbiAgICAjIDAwMDAwMDAwMCAgMDAwMDAwMCAgIDAwMCAwIDAwMCAgMDAwICAgMDAwXG4gICAgIyAwMDAgMCAwMDAgIDAwMCAgICAgICAwMDAgIDAwMDAgIDAwMCAgIDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMFxuXG4gICAgTWVudS5zZXRBcHBsaWNhdGlvbk1lbnUgTWVudS5idWlsZEZyb21UZW1wbGF0ZSBbXG4gICAgICAgIGxhYmVsOiBhcHAuZ2V0TmFtZSgpXG4gICAgICAgIHN1Ym1lbnU6IFtcbiAgICAgICAgICAgIGxhYmVsOiBcIkFib3V0ICN7cGtnLm5hbWV9XCJcbiAgICAgICAgICAgIGFjY2VsZXJhdG9yOiAnQ21kT3JDdHJsKy4nXG4gICAgICAgICAgICBjbGljazogLT4gc2hvd0Fib3V0KClcbiAgICAgICAgLFxuICAgICAgICAgICAgdHlwZTogJ3NlcGFyYXRvcidcbiAgICAgICAgLFxuICAgICAgICAgICAgbGFiZWw6ICdRdWl0J1xuICAgICAgICAgICAgYWNjZWxlcmF0b3I6ICdDbWRPckN0cmwrUSdcbiAgICAgICAgICAgIGNsaWNrOiAtPlxuICAgICAgICAgICAgICAgIHNhdmVCb3VuZHMoKVxuICAgICAgICAgICAgICAgIGFwcC5leGl0IDBcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQgMFxuICAgICAgICBdXG4gICAgLFxuICAgICAgICAjIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgIDAwMDAwMDAgICAwMDAgICAwMDBcbiAgICAgICAgIyAwMDAgMCAwMDAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwXG4gICAgICAgICMgMDAwMDAwMDAwICAwMDAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwMFxuICAgICAgICAjIDAwMCAgIDAwMCAgMDAwICAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDBcbiAgICAgICAgIyAwMCAgICAgMDAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAgICAgIDAwXG5cbiAgICAgICAgbGFiZWw6ICdXaW5kb3cnXG4gICAgICAgIHN1Ym1lbnU6IFtcbiAgICAgICAgICAgIGxhYmVsOiAgICAgICAnQ2xvc2UgV2luZG93J1xuICAgICAgICAgICAgYWNjZWxlcmF0b3I6ICdDbWRPckN0cmwrVydcbiAgICAgICAgICAgIGNsaWNrOiAgICAgICAtPiB3aW4/LmNsb3NlKClcbiAgICAgICAgLFxuICAgICAgICAgICAgdHlwZTogJ3NlcGFyYXRvcidcbiAgICAgICAgLFxuICAgICAgICAgICAgbGFiZWw6ICAgICAgICdSZWxvYWQgV2luZG93J1xuICAgICAgICAgICAgYWNjZWxlcmF0b3I6ICdDbWRPckN0cmwrQWx0K0wnXG4gICAgICAgICAgICBjbGljazogICAgICAgLT4gcmVsb2FkV2luZG93KClcbiAgICAgICAgLFxuICAgICAgICAgICAgbGFiZWw6ICAgICAgICdUb2dnbGUgRGV2VG9vbHMnXG4gICAgICAgICAgICBhY2NlbGVyYXRvcjogJ0NtZE9yQ3RybCtBbHQrSSdcbiAgICAgICAgICAgIGNsaWNrOiAgICAgICAtPiB3aW4/LndlYkNvbnRlbnRzLm9wZW5EZXZUb29scygpXG4gICAgICAgIF1cbiAgICBdXG5cbiAgICBwcmVmcy5pbml0IGRlZmF1bHRzOnNob3J0Y3V0OidGMSdcblxuICAgIGVsZWN0cm9uLmdsb2JhbFNob3J0Y3V0LnJlZ2lzdGVyIHByZWZzLmdldCgnc2hvcnRjdXQnKSwgdG9nZ2xlV2luZG93XG5cbiAgICBmcy5lbnN1cmVEaXJTeW5jIGljb25EaXJcblxuICAgIHNjciA9IHJlcXVpcmUgJy4vc2NyaXB0cydcbiAgICBpZiBzbGFzaC53aW4oKVxuICAgICAgICBzY3JpcHRzID0gc2NyLndpblNjcmlwdHMoKVxuICAgIGVsc2VcbiAgICAgICAgc2NyaXB0cyA9IHNjci5tYWNTY3JpcHRzKClcbiAgICBcbiAgICBmaW5kQXBwcygpXG4gICAgICAgIFxuICAgICAgICAgICAgIl19
//# sourceURL=../coffee/main.coffee